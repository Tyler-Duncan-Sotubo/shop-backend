import { db } from 'src/infrastructure/drizzle/types/drizzle';
import { AuditService } from 'src/domains/audit/audit.service';
import { CacheService } from 'src/infrastructure/cache/cache.service';
import { User } from 'src/channels/admin/common/types/user.type';
import { CartQueryService } from './cart-query.service';
import { AddCartItemDto, UpdateCartItemDto } from '../dto';
import { CartTotalsService } from './cart-totals.service';
import { InventoryAvailabilityService } from '../../inventory/services/inventory-availability.service';
export declare class CartItemMutationService {
    private readonly db;
    private readonly cache;
    private readonly auditService;
    private readonly cartQuery;
    private readonly cartTotals;
    private readonly availability;
    constructor(db: db, cache: CacheService, auditService: AuditService, cartQuery: CartQueryService, cartTotals: CartTotalsService, availability: InventoryAvailabilityService);
    addItem(companyId: string, storeId: string, cartId: string, dto: AddCartItemDto, user?: User, ip?: string): Promise<{
        items: ({
            availableQty: number;
            reservedQty: number;
            safetyStock: number;
            sellableQty: number;
            maxQty: number;
            stockStatus: string;
            id: string;
            cartId: string;
            productId: string;
            variantId: string | null;
            name: string;
            sku: string | null;
            quantity: number;
            unitPrice: string;
            lineTotal: string;
            weightKg: any;
            variantTitle: any;
            image: any;
            slug: any;
            cartItemId: string;
        } | {
            availableQty: number;
            reservedQty: number;
            safetyStock: number;
            sellableQty: number;
            maxQty: number;
            stockStatus: string;
            id: string;
            cartId: string;
            productId: string;
            variantId: string | null;
            name: string;
            sku: string | null;
            quantity: number;
            unitPrice: string;
            lineTotal: string;
            weightKg: any;
            variantTitle: any;
            image: any;
            slug: any;
            cartItemId: string;
        } | {
            availableQty: number;
            reservedQty: number;
            safetyStock: number;
            sellableQty: number;
            maxQty: number;
            stockStatus: string;
            id: string;
            cartId: string;
            productId: string;
            variantId: string | null;
            name: string;
            sku: string | null;
            quantity: number;
            unitPrice: string;
            lineTotal: string;
            weightKg: any;
            variantTitle: any;
            image: any;
            slug: any;
            cartItemId: string;
        } | {
            availableQty: number;
            reservedQty: number;
            safetyStock: number;
            sellableQty: number;
            maxQty: number;
            stockStatus: string;
            id: string;
            cartId: string;
            productId: string;
            variantId: string | null;
            name: string;
            sku: string | null;
            quantity: number;
            unitPrice: string;
            lineTotal: string;
            weightKg: any;
            variantTitle: any;
            image: any;
            slug: any;
            cartItemId: string;
        })[];
    }>;
    updateItemQuantity(companyId: string, storeId: string, cartId: string, cartItemId: string, dto: UpdateCartItemDto, user?: User, ip?: string): Promise<{
        items: ({
            availableQty: number;
            reservedQty: number;
            safetyStock: number;
            sellableQty: number;
            maxQty: number;
            stockStatus: string;
            id: string;
            cartId: string;
            productId: string;
            variantId: string | null;
            name: string;
            sku: string | null;
            quantity: number;
            unitPrice: string;
            lineTotal: string;
            weightKg: any;
            variantTitle: any;
            image: any;
            slug: any;
            cartItemId: string;
        } | {
            availableQty: number;
            reservedQty: number;
            safetyStock: number;
            sellableQty: number;
            maxQty: number;
            stockStatus: string;
            id: string;
            cartId: string;
            productId: string;
            variantId: string | null;
            name: string;
            sku: string | null;
            quantity: number;
            unitPrice: string;
            lineTotal: string;
            weightKg: any;
            variantTitle: any;
            image: any;
            slug: any;
            cartItemId: string;
        } | {
            availableQty: number;
            reservedQty: number;
            safetyStock: number;
            sellableQty: number;
            maxQty: number;
            stockStatus: string;
            id: string;
            cartId: string;
            productId: string;
            variantId: string | null;
            name: string;
            sku: string | null;
            quantity: number;
            unitPrice: string;
            lineTotal: string;
            weightKg: any;
            variantTitle: any;
            image: any;
            slug: any;
            cartItemId: string;
        } | {
            availableQty: number;
            reservedQty: number;
            safetyStock: number;
            sellableQty: number;
            maxQty: number;
            stockStatus: string;
            id: string;
            cartId: string;
            productId: string;
            variantId: string | null;
            name: string;
            sku: string | null;
            quantity: number;
            unitPrice: string;
            lineTotal: string;
            weightKg: any;
            variantTitle: any;
            image: any;
            slug: any;
            cartItemId: string;
        })[];
    }>;
    removeItem(companyId: string, storeId: string, cartId: string, cartItemId: string, user?: User, ip?: string): Promise<{
        items: ({
            availableQty: number;
            reservedQty: number;
            safetyStock: number;
            sellableQty: number;
            maxQty: number;
            stockStatus: string;
            id: string;
            cartId: string;
            productId: string;
            variantId: string | null;
            name: string;
            sku: string | null;
            quantity: number;
            unitPrice: string;
            lineTotal: string;
            weightKg: any;
            variantTitle: any;
            image: any;
            slug: any;
            cartItemId: string;
        } | {
            availableQty: number;
            reservedQty: number;
            safetyStock: number;
            sellableQty: number;
            maxQty: number;
            stockStatus: string;
            id: string;
            cartId: string;
            productId: string;
            variantId: string | null;
            name: string;
            sku: string | null;
            quantity: number;
            unitPrice: string;
            lineTotal: string;
            weightKg: any;
            variantTitle: any;
            image: any;
            slug: any;
            cartItemId: string;
        } | {
            availableQty: number;
            reservedQty: number;
            safetyStock: number;
            sellableQty: number;
            maxQty: number;
            stockStatus: string;
            id: string;
            cartId: string;
            productId: string;
            variantId: string | null;
            name: string;
            sku: string | null;
            quantity: number;
            unitPrice: string;
            lineTotal: string;
            weightKg: any;
            variantTitle: any;
            image: any;
            slug: any;
            cartItemId: string;
        } | {
            availableQty: number;
            reservedQty: number;
            safetyStock: number;
            sellableQty: number;
            maxQty: number;
            stockStatus: string;
            id: string;
            cartId: string;
            productId: string;
            variantId: string | null;
            name: string;
            sku: string | null;
            quantity: number;
            unitPrice: string;
            lineTotal: string;
            weightKg: any;
            variantTitle: any;
            image: any;
            slug: any;
            cartItemId: string;
        })[];
    }>;
    private isUniqueViolation;
    private resolveVariantPrice;
    private mulMoney;
}
